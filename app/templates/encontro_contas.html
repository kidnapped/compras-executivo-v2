{% extends "app/base.html" %} {% block title %}Encontro de Contas - Compras
Executivo{% endblock %} {% block content %}

<div class="container-fluid">
  <!-- Breadcrumb Component - Dynamic -->
  <div id="encontro-contas-breadcrumb-dynamic-container">
    <!-- Breadcrumb ser√° carregado dinamicamente via JavaScript -->
  </div>

  <!-- Topico Component - Dynamic -->
  <div id="encontro-contas-topico-container">
    <!-- Topico ser√° carregado dinamicamente via JavaScript -->
  </div>

  <!-- Main Content -->
  <div id="encontro-contas-content-metodos-eficiencia" class="encontro-contas-three-cards">
    <!-- Main Content Layout -->
    <div class="row">
      <!-- Card 1 - Empenhos -->
      <div class="col-xl-4 col-lg-4 col-md-6 col-12 mb-2">
        <div class="encontro-contas-content">
          <div class="sidebar-card">
            <!-- Card Header Component - Dynamic -->
            <div id="encontro-contas-empenhos-header">
              <!-- Card header ser√° carregado dinamicamente via JavaScript -->
            </div>
            
            <div class="card-body-govbr">
              <!-- Content for Card 1 -->
              <div class="encontro-contas-card-content" id="encontroContasEmpenhosContent">
                <!-- Conte√∫do ser√° carregado dinamicamente -->
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Card 2 - Valores Totais -->
      <div class="col-xl-4 col-lg-4 col-md-6 col-12 mb-2">
        <div class="encontro-contas-content">
          <div class="sidebar-card">
            <!-- Card Header Component - Dynamic -->
            <div id="encontro-contas-valores-header">
              <!-- Card header ser√° carregado dinamicamente via JavaScript -->
            </div>
            
            <div class="card-body-govbr">
              <!-- Content for Card 2 -->
              <div class="encontro-contas-card-content" id="encontroContasValoresContent">
                <!-- Conte√∫do ser√° carregado dinamicamente -->
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Card 3 - √öltimos Lan√ßamentos -->
      <div class="col-xl-4 col-lg-4 col-md-6 col-12 mb-2">
        <div class="encontro-contas-content">
          <div class="sidebar-card">
            <!-- Card Header Component - Dynamic -->
            <div id="encontro-contas-lancamentos-header">
              <!-- Card header ser√° carregado dinamicamente via JavaScript -->
            </div>
            
            <div class="card-body-govbr">
              <!-- Content for Card 3 -->
              <div class="encontro-contas-card-content" id="encontroContasLancamentosContent">
                <!-- Conte√∫do ser√° carregado dinamicamente -->
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Topico Component - Movimenta√ß√µes Financeiras - Dynamic -->
  <div id="encontro-contas-movimentacoes-topico-container">
    <!-- Topico ser√° carregado dinamicamente via JavaScript -->
  </div>

  <!-- Full-width 12-col chart container above the empenhos list -->
  <div class="col-12 mb-4">
    <div
      id="grafico-financeiro-container"
      style="width: 100%; height: 300px"
    ></div>
  </div>

  

  <!-- Empenhos Originais Section with Grid Financeiro and Movimenta√ß√µes -->
  <div class="row mb-4 encontro-cards-row">
    <!-- Empenhos Originais - Left side (col-lg-8) -->
    <div class="col-lg-8">
      <div
        class="br-card"
        id="empenhos-originais-container"
        style="height: 500px"
      >
        <div class="card-header">
          <div class="d-flex align-items-center justify-content-between">
            <div class="d-flex" style="width: 100%">
              <div class="ml-3" style="flex-grow: 1">
                <div class="titulo">
                  <img
                    src="/static/images/doc2.png"
                    alt="√çcone"
                    style="height: 36px; margin: 10px 0px -10px 0px"
                  />
                  Empenhos Originais
                </div>
                <div
                  style="
                    border-bottom: 1px solid #ccc;
                    margin: -6px 0px 0px 26px;
                  "
                ></div>
                <div class="subtitulo">
                  Lista numerada de empenhos do contrato
                </div>
              </div>
            </div>
            <div
              class="d-flex align-items-center gap-2"
              style="margin-top: -18px"
            ></div>
          </div>
        </div>
        <div
          class="card-content"
          style="padding: 0; height: calc(100% - 80px); overflow-y: auto"
        >
          <div class="table-responsive">
            <table class="br-table table-hover table-striped">
              <thead style="background-color: #f8f8f8">
                <tr>
                  <th style="width: 10px; border: none">#</th>
                  <th style="width: 10px; border: none"></th>
                  <th style="border: none">Empenho</th>
                  <th style="border: none">Data</th>
                  <th style="border: none">Valor</th>
                  <th style="border: none">Or√ßament√°rio</th>
                  <th style="border: none">Financeiro</th>
                  <th style="border: none">Saldo</th>
                  <th style="border: none">Status</th>
                  <th style="width: 10px; border: none"></th>
                  <th style="width: 10px; border: none"></th>
                </tr>
              </thead>
              <tbody id="empenhos-originais-tbody">
                <!-- Loading state -->
                <tr>
                  <td colspan="13" class="text-center" style="padding: 40px">
                    <div class="text-muted">
                      <i class="fas fa-search fa-2x mb-3"></i>
                      <br />
                      Realize uma busca para visualizar os empenhos originais
                    </div>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>

    <!-- Right side - Grid Financeiro and Movimenta√ß√µes stacked (col-lg-4) -->
    <div class="col-lg-4">
      <div class="encontro-right-column">
        <!-- Movimenta√ß√µes Or√ßament√°rias Section -->
        <div class="mb-4">
          <div
            class="br-card"
            id="movimentacoes-container"
            style="height: 240px"
          >
            <div class="card-header">
              <div class="d-flex align-items-center justify-content-between">
                <div class="d-flex" style="width: 100%">
                  <div class="ml-3" style="flex-grow: 1">
                    <div class="titulo">
                      <img
                        src="/static/images/doc2.png"
                        alt="√çcone"
                        style="height: 36px; margin: 10px 0px -10px 0px"
                      />
                      Or√ßament√°rio
                    </div>
                    <div
                      style="
                        border-bottom: 1px solid #ccc;
                        margin: -6px 0px 0px 26px;
                      "
                    ></div>
                    <div class="subtitulo">
                      Lista de movimenta√ß√µes or√ßament√°rias do contrato
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div
              class="card-content"
              style="padding: 0; height: calc(100% - 80px); overflow-y: auto"
            >
              <div class="table-responsive">
                <table class="br-table table-hover table-striped">
                  <thead style="background-color: #f8f8f8">
                    <tr>
                      <th style="width: 40px; border: none">#</th>
                      <th style="border: none">Data</th>
                      <th style="border: none">Empenho</th>
                      <th style="width: 50px; border: none"></th>
                      <th style="border: none">Esp√©cie</th>
                      <th style="border: none">Valor</th>
                    </tr>
                  </thead>
                  <tbody id="movimentacoes-tbody">
                    <!-- Loading state -->
                    <tr>
                      <td colspan="6" class="text-center" style="padding: 40px">
                        <div class="text-muted">
                          <i class="fas fa-exchange-alt fa-2x mb-3"></i>
                          <br />
                          Dados de movimenta√ß√µes carregados automaticamente
                        </div>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>
        </div>

        <!-- Grid Numerado Financeiro Section -->
        <div>
          <div
            class="br-card"
            id="financeiro-grid-container"
            style="height: 240px"
          >
            <div class="card-header">
              <div class="d-flex align-items-center justify-content-between">
                <div class="d-flex" style="width: 100%">
                  <div class="ml-3" style="flex-grow: 1">
                    <div class="titulo">
                      <img
                        src="/static/images/doc2.png"
                        alt="√çcone"
                        style="height: 36px; margin: 10px 0px -10px 0px"
                      />
                      Financeiro
                    </div>
                    <div
                      style="
                        border-bottom: 1px solid #ccc;
                        margin: -6px 0px 0px 26px;
                      "
                    ></div>
                    <div class="subtitulo">
                      Pagamentos e movimenta√ß√µes financeiras do contrato
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div
              class="card-content"
              style="padding: 0; height: calc(100% - 80px); overflow-y: auto"
            >
              <div class="table-responsive">
                <table class="br-table table-hover table-striped">
                  <thead style="background-color: #f8f8f8">
                    <tr>
                      <th style="width: 40px; border: none">#</th>
                      <th style="border: none">Data</th>
                      <th style="border: none">Pagamento</th>
                      <th style="width: 50px; border: none"></th>
                      <th style="border: none">Tipo</th>
                      <th style="border: none">Parcial</th>
                      <th style="border: none">Nominal</th>
                    </tr>
                  </thead>
                  <tbody id="financeiro-grid-tbody">
                    <!-- Loading state -->
                    <tr>
                      <td colspan="8" class="text-center" style="padding: 40px">
                        <div class="text-muted">
                          <i class="fas fa-coins fa-2x mb-3"></i>
                          <br />
                          Dados financeiros carregados automaticamente
                        </div>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <!-- The DetalhesEmpenhos functionality is now integrated into encontro_contas.js -->
  <!-- No additional script needed here as it's initialized with the main controller -->
</div>

<script type="module">
  // O m√≥dulo encontroContas agora √© carregado automaticamente via app.js
  // e se auto-inicializa quando detecta que est√° na p√°gina correta
  console.log("üìã Encontro de Contas page loaded - waiting for auto-initialization...");
</script>
{% endblock %}
