{% extends "app/base.html" %}

{% block title %}DW Tesouro Gerencial - Administra칞칚o{% endblock %}

{% block content %}
<div class="admin_dw_tesouro-page">
  <div class="container-fluid">
    <!-- Breadcrumb Component - Dynamic -->
    <div id="admin-dw-breadcrumb-dynamic-container">
      <!-- Breadcrumb ser치 carregado dinamicamente via JavaScript -->
    </div>

    <!-- Main Content Layout -->
    <div class="row h-100 main-content-layout row-tight">
      <!-- Sidebar - Lista de Tabelas -->
      <div class="col-md-3">
        <div class="tables-sidebar">
          <div class="sidebar-card">
            <!-- Card Header Component - Dynamic -->
            <div id="admin-dw-tables-card-header">
              <!-- Card header ser치 carregado dinamicamente via JavaScript -->
            </div>
            <div class="card-body-govbr">
              <!-- Search Box -->
              <div class="search-box mb-3" style="margin:0px !important;">
                <input type="text" class="form-control search-input" placeholder="游댌 Buscar tabela..." id="tableSearch">
              </div>
              
              <!-- Tables List -->
              <div class="admin-dw-tesouro-tables-list" id="adminDwTesouroTablesList">
                <!-- Lista de tabelas ser치 carregada dinamicamente via /admin/etl/dw-tesouro/lista-tabelas -->
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Main Content Area -->
      <div class="col-md-9">
        <div class="table-content">
          <div class="sidebar-card h-100">
            <!-- Card Header Component - Dynamic -->
            <div id="admin-dw-main-card-header">
              <!-- Card header ser치 carregado dinamicamente via JavaScript -->
            </div>
            
            <div class="card-body-govbr" style="padding: 0;">
              <!-- Table Content com header grudado -->
              <div class="table-wrapper">
                <div class="empty-state" id="emptyState">
                  <div class="empty-icon">
                    <i class="fas fa-table"></i>
                  </div>
                  <h4>Nenhuma Tabela Selecionada</h4>
                  <p>Selecione uma tabela na barra lateral para visualizar seus dados.</p>
                </div>

                <div class="loading-state" id="loadingState" style="display: none;">
                  <div class="loading-spinner">
                    <i class="fas fa-spinner fa-spin"></i>
                  </div>
                  <h4>Carregando dados...</h4>
                  <p>Aguarde enquanto buscamos os dados da tabela.</p>
                </div>

                <!-- Container com scroll para tabela -->
                <div class="dashboard-table-container" id="tableContainer" style="display: none;">
                  <div class="table-responsive" style="border-bottom: 1px solid #ddd;">
                    <table class="br-table table-hover table-striped" id="dataTable" style="margin-bottom: 0; border: none;">
                      <thead
                        style="
                          position: sticky;
                          top: 0;
                          z-index: 10;
                        "
                        id="tableHeaderDW"
                      >
                        <!-- Dynamic headers ser칚o inseridos aqui priorizando DT_CARGA_C, depois ID_*, depois resto -->
                      </thead>
                      <tbody>
                        <!-- Dynamic data will be inserted here -->
                      </tbody>
                    </table>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

{% endblock %}