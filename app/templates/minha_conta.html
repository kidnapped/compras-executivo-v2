{% extends "app/base.html" %}

{% block title %}Minha Conta - Compras Executivo{% endblock %}

{% block content %}
<div class="minha_conta_profile_page">
    <div class="container-fluid">
        <!-- Breadcrumb Component - Dynamic -->
        <div id="minha-conta-breadcrumb-dynamic-container">
            <!-- Breadcrumb será carregado dinamicamente via JavaScript -->
        </div>

        <!-- Perfil do Usuário Card - Format similar to indicadores -->
        <div class="row">
            <div class="col-12 mb-3">
                <div class="minha_conta_card_container">
                    <div class="minha_conta_card_modern">
                        <!-- Card Header Component - Dynamic -->
                        <div id="minha-conta-perfil-header">
                            <!-- Card header será carregado dinamicamente via JavaScript -->
                        </div>
                        <div class="minha_conta_card_body">
                            <div class="minha_conta_profile_header_card">
                                <div class="minha_conta_avatar_section">
                                    <div class="minha_conta_avatar_circle">
                                        <i class="fas fa-user"></i>
                                    </div>
                                    <div class="minha_conta_avatar_status online"></div>
                                </div>
                                <div class="minha_conta_profile_info">
                                    <h1 class="profile-name">{{ user_data.nome or 'Usuário' }}</h1>
                                    <p class="minha_conta_profile_role">{{ user_data.role or 'Perfil não definido' }}
                                    </p>
                                    <div class="minha_conta_profile_badges">
                                        <span class="minha_conta_badge minha_conta_badge_primary">
                                            <i class="fas fa-shield-alt me-1"></i>
                                            {{ user_data.scope or 'Acesso padrão' }}
                                        </span>
                                        {% if user_data.uasgs %}
                                        <span class="minha_conta_badge minha_conta_badge_secondary">
                                            <i class="fas fa-building me-1"></i>
                                            {{ user_data.uasgs|length }} UASG{{ 's' if user_data.uasgs|length > 1 else
                                            '' }}
                                        </span>
                                        {% endif %}
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Content Section -->
        <div class="minha_conta_profile_content">
            <div class="row g-4">
                <!-- Informações Pessoais - Lado Esquerdo -->
                <div class="col-lg-8">
                    <div class="minha_conta_card_container">
                        <div class="minha_conta_card_modern">
                            <!-- Card Header Component - Dynamic -->
                            <div id="minha-conta-informacoes-header">
                                <!-- Card header será carregado dinamicamente via JavaScript -->
                            </div>
                            <div class="minha_conta_card_body">
                                <div class="minha_conta_info_grid">
                                    <div class="minha_conta_info_item minha_conta_clickable_item"
                                        data-copy="CPF: {{ user_data.cpf or 'Não informado' }}">
                                        <div class="minha_conta_info_icon">
                                            <i class="fas fa-fingerprint"></i>
                                        </div>
                                        <div class="minha_conta_info_content">
                                            <label>CPF</label>
                                            <span id="cpf-display">{{ user_data.cpf or 'Não informado' }}</span>
                                        </div>
                                        <div class="minha_conta_copy_indicator">
                                            <i class="fas fa-copy"></i>
                                        </div>
                                    </div>

                                    <div class="minha_conta_info_item minha_conta_clickable_item"
                                        data-copy="ID do Usuário: {{ user_data.usuario_id or 'Não definido' }}">
                                        <div class="minha_conta_info_icon">
                                            <i class="fas fa-hashtag"></i>
                                        </div>
                                        <div class="minha_conta_info_content">
                                            <label>ID do Usuário</label>
                                            <span>{{ user_data.usuario_id or 'Não definido' }}</span>
                                        </div>
                                        <div class="minha_conta_copy_indicator">
                                            <i class="fas fa-copy"></i>
                                        </div>
                                    </div>

                                    <div class="minha_conta_info_item minha_conta_clickable_item"
                                        data-copy="Nome Completo: {{ user_data.nome or 'Não informado' }}">
                                        <div class="minha_conta_info_icon">
                                            <i class="fas fa-user-tag"></i>
                                        </div>
                                        <div class="minha_conta_info_content">
                                            <label>Nome Completo</label>
                                            <span>{{ user_data.nome or 'Não informado' }}</span>
                                        </div>
                                        <div class="minha_conta_copy_indicator">
                                            <i class="fas fa-copy"></i>
                                        </div>
                                    </div>

                                    <div class="minha_conta_info_item minha_conta_clickable_item"
                                        data-copy="Email: {{ user_data.email or 'Não informado' }}">
                                        <div class="minha_conta_info_icon">
                                            <i class="fas fa-envelope"></i>
                                        </div>
                                        <div class="minha_conta_info_content">
                                            <label>Email</label>
                                            <span>{{ user_data.email or 'Não informado' }}</span>
                                        </div>
                                        <div class="minha_conta_copy_indicator">
                                            <i class="fas fa-copy"></i>
                                        </div>
                                    </div>

                                    <div class="minha_conta_info_item minha_conta_clickable_item"
                                        data-copy="Perfil de Acesso: {{ user_data.role or 'Não definido' }}">
                                        <div class="minha_conta_info_icon">
                                            <i class="fas fa-user-shield"></i>
                                        </div>
                                        <div class="minha_conta_info_content">
                                            <label>Perfil de Acesso</label>
                                            <span>{{ user_data.role or 'Não definido' }}</span>
                                        </div>
                                        <div class="minha_conta_copy_indicator">
                                            <i class="fas fa-copy"></i>
                                        </div>
                                    </div>

                                    <div class="minha_conta_info_item minha_conta_clickable_item"
                                        data-copy="Abrangência: {{ user_data.scope or 'Não definido' }}">
                                        <div class="minha_conta_info_icon">
                                            <i class="fas fa-globe"></i>
                                        </div>
                                        <div class="minha_conta_info_content">
                                            <label>Abrangência</label>
                                            <span>{{ user_data.scope or 'Não definido' }}</span>
                                        </div>
                                        <div class="minha_conta_copy_indicator">
                                            <i class="fas fa-copy"></i>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Lado Direito: Acesso Rápido + Status do Sistema -->
                <div class="col-lg-4">
                    <div class="row g-4">
                        <!-- Acesso Rápido - Em cima à direita -->
                        <div class="col-12">
                            <div class="minha_conta_card_container">
                                <div class="minha_conta_card_modern">
                                    <!-- Card Header Component - Dynamic -->
                                    <div id="minha-conta-acesso-header">
                                        <!-- Card header será carregado dinamicamente via JavaScript -->
                                    </div>
                                    <div class="minha_conta_card_body">
                                        <div class="minha_conta_quick_actions">
                                            <a href="/dashboard" class="minha_conta_quick_action_item">
                                                <div class="minha_conta_action_icon">
                                                    <i class="fas fa-chart-line"></i>
                                                </div>
                                                <div class="minha_conta_action_content">
                                                    <span>Dashboard</span>
                                                    <small>Visualizar contratos</small>
                                                </div>
                                                <i class="fas fa-chevron-right minha_conta_action_arrow"></i>
                                            </a>
                                            <a href="/admin" class="minha_conta_quick_action_item">
                                                <div class="minha_conta_action_icon">
                                                    <i class="fas fa-cogs"></i>
                                                </div>
                                                <div class="minha_conta_action_content">
                                                    <span>Administração</span>
                                                    <small>Gerenciar sistema</small>
                                                </div>
                                                <i class="fas fa-chevron-right minha_conta_action_arrow"></i>
                                            </a>
                                            <a href="/user_account" class="minha_conta_quick_action_item">
                                                <div class="minha_conta_action_icon">
                                                    <i class="fas fa-user-edit"></i>
                                                </div>
                                                <div class="minha_conta_action_content">
                                                    <span>Conta de Usuário</span>
                                                    <small>Editar perfil</small>
                                                </div>
                                                <i class="fas fa-chevron-right minha_conta_action_arrow"></i>
                                            </a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Status do Sistema - Embaixo à direita -->
                        <div class="col-12">
                            <div class="minha_conta_card_container">
                                <div class="minha_conta_card_modern">
                                    <!-- Card Header Component - Dynamic -->
                                    <div id="minha-conta-status-header">
                                        <!-- Card header será carregado dinamicamente via JavaScript -->
                                    </div>
                                    <div class="minha_conta_card_body">
                                        <div class="minha_conta_status_items">
                                            <div class="minha_conta_status_item">
                                                <div class="minha_conta_status_indicator online"></div>
                                                <div class="minha_conta_status_content">
                                                    <label>Status</label>
                                                    <span>Online</span>
                                                </div>
                                            </div>
                                            <div class="minha_conta_status_item">
                                                <div class="minha_conta_status_indicator"></div>
                                                <div class="minha_conta_status_content">
                                                    <label>Último Login</label>
                                                    <span>Sessão atual</span>
                                                </div>
                                            </div>
                                            <div class="minha_conta_status_item">
                                                <div class="minha_conta_status_indicator"></div>
                                                <div class="minha_conta_status_content">
                                                    <label>Versão</label>
                                                    <span>v3.6.1</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Segunda linha para outros cards -->
        <div class="row mt-4">
            <div class="col-12">
                <!-- UASGs Vinculadas -->
                {% if user_data.uasgs %}
                <div class="minha_conta_card_modern">
                    <!-- Card Header Component - Dynamic -->
                    <div id="minha-conta-uasgs-header">
                        <!-- Card header será carregado dinamicamente via JavaScript -->
                    </div>
                    <div class="minha_conta_card_body">
                        <div class="minha_conta_uasg_grid">
                            {% for uasg in user_data.uasgs %}
                            <div class="minha_conta_uasg_item">
                                <div class="minha_conta_uasg_icon">
                                    <i class="fas fa-institution"></i>
                                </div>
                                <div class="minha_conta_uasg_code">{{ uasg }}</div>
                                <div class="minha_conta_uasg_status active">Ativa</div>
                            </div>
                            {% endfor %}
                        </div>
                    </div>
                </div>
                {% endif %}
            </div>
        </div>

        <!-- Terceira linha para outros cards -->
        <div class="row mt-4">
            <div class="col-12">
                <div class="minha_conta_card_container minha_conta_security_card">
                    <div class="minha_conta_card_modern">
                        <!-- Card Header Component - Dynamic -->
                        <div id="minha-conta-seguranca-header">
                            <!-- Card header será carregado dinamicamente via JavaScript -->
                        </div>
                        <div class="minha_conta_card_body">
                            <div class="minha_conta_security_notice">
                                <div class="minha_conta_notice_icon">
                                    <i class="fas fa-info-circle"></i>
                                </div>
                                <div class="minha_conta_notice_content">
                                    <h4>Política de Segurança</h4>
                                    <p>Para alterações de senha ou outras configurações de segurança, entre em
                                        contato com o administrador do sistema através dos canais oficiais.</p>
                                </div>
                            </div>
                            <div class="minha_conta_security_features">
                                <div class="minha_conta_feature_item disabled">
                                    <div class="minha_conta_feature_icon">
                                        <i class="fas fa-key"></i>
                                    </div>
                                    <div class="minha_conta_feature_content">
                                        <span>Alteração de Senha</span>
                                        <small>Contate o administrador</small>
                                    </div>
                                    <div class="minha_conta_feature_status">
                                        <i class="fas fa-lock"></i>
                                    </div>
                                </div>
                                <div class="minha_conta_feature_item disabled">
                                    <div class="minha_conta_feature_icon">
                                        <i class="fas fa-mobile-alt"></i>
                                    </div>
                                    <div class="minha_conta_feature_content">
                                        <span>Autenticação em Dois Fatores</span>
                                        <small>Funcionalidade futura</small>
                                    </div>
                                    <div class="minha_conta_feature_status">
                                        <i class="fas fa-clock"></i>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div style="height:20px;"></div>

    {% endblock %}